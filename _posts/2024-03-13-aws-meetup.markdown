---
layout: post
title: "인프런 퇴근길 밋업 - AWS 그럴듯하게 운영해보기"
date: 2024-03-13 09:00:01 +0900
categories: [ 인프런, 퇴근길 밋업 ]
---

# 합리적으로 AWS 운영을 해보자

## AWS Lambda

람다를 이용해서 특정 시점에, 특정 명령을 내릴 수 있도록 구성할 수 있음

## 서비스 한도

리소스 사용량과, 서비스 한도를 트래킹하면서, 특정 시점에 알림을 구성할 수 있다. 예를 들어, Trusted Advisor 에서는 80 % 이상의 사용률일 때 알림이 온다.
<br><span>
그러나 TrustedAdvisor 는 과금이 비싸기에 AWS CLI 를 이용하면 비슷한 기능을 구현할 수 있다. 사용량을 모니터링하고, 특정 로직을 수행하도록.

## 비용

AWS 계산기로 예상 비용을 체크해볼 수 있다. 비용과 관련되서 흔한 오해로 InBound 트래픽 비용은 과금 대상이 아니다. 다른 과금 대상과 통신이 발생하는, outbound 트래픽에서 과금이 된다.
<br><span>
AWS 도 약정처럼 절감형 플랜이 존재한다. 운영 지표에서 RDS 와 EC2 가 대부분 비용 대상이 되는데, 지표를 바탕으로 확인하면 운영 계획을 가늠할 수 있다.
<br><span>
사용 추이를 확인했는데, 서버가 계속 구동중일 필요가 없다면 가급적 중지를 하는 편이 과금에 유리하다. 예를 들어, 새벽 3시에 로컬 테스트용 서버를 일괄적으로 중지한다던가 하는 방법이 있을 것이다.
<br><span>
**Compute Optimizer** 로 사용량을 확인하고 스펙을 조정해볼 수 있다. **Trusted Advisor** 에서도 확인이 가능하다. 유후 DB 인스턴스나 등등을 확인해서 비용 절감을 누릴 수 있는 부분을 확인해보자.

> 24.02 월 부터, 공인 IP 를 사용하면 모두 과금된다.

## 보안

AWS 를 활용하는 것만으로도 네트워크 장비상 보안 침해를 방지할 수 있다. LADN, Smulf 등의 공격 등.
<br><span>
AWS 에서 보안은 IAM 과 보안 그룹의 설정이다. 필요한 용도로만 필요한 자원에 접근할 수 있도록 설정해야 한다. 이 2가지는 과금 대상이 아니다.
<br><span>
보안 레이어를 구성할 수 있지만 비용이 비싸다. OWASP 기반으로 레이어를 구성할 수 있는데, 직접 구성하는 방법도 있다.
<br><span>
public call 이 가능한 지점을 체크해야 한다. S3 를 직접 접근할 수 있게 열어주는 것은 취약한 부분이다. **보안의 기초는 인증한 자에게 허용 범위까지만 권한을 부여하는 것이다.**

## 내결함성과 성능

> 강의 추천 인프라공방 - [그럴듯한 서비스 만들기](https://www.inflearn.com/course/%EC%9D%B8%ED%94%84%EB%9D%BC-%EA%B3%B5%EB%B0%A9-%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%A7%8C%EB%93%A4%EA%B8%B0?gad_source=1&gclid=Cj0KCQjw-r-vBhC-ARIsAGgUO2DoyIBYerjrIambfEmMp5FSELpUTUswgFR2iT5gwrYJ20rIaflqZb0aAqAtEALw_wcB)


## 결론 요약

개선 전/후 상태를 꼭 기록해봐야 한다. 전, 후의 계측은 필수다.
1. 반복적으로 수행하는 작업은 자동화해보자.
2. 1년 이상의 리소스는 온 디멘드로 사용하기보단, Saving Plans 혹은 RI 를 검토해보자.
3. Compute Optimized 나 Trusted Advisor 를 활용해보자.
4. Public Call 이 가능한 지점을 확인하고, 보안 지침을 체크하자.
